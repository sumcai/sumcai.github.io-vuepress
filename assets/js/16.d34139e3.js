(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{376:function(s,a,t){s.exports=t.p+"assets/img/1637478946876.8b0c927d.png"},468:function(s,a,t){s.exports=t.p+"assets/img/1639300692250.a97b8a1c.png"},469:function(s,a,t){s.exports=t.p+"assets/img/1639310527486.1beb112d.png"},604:function(s,a,t){"use strict";t.r(a);var n=t(20),r=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"mvp变换坐标"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mvp变换坐标"}},[s._v("#")]),s._v(" MVP变换坐标")]),s._v(" "),n("h2",{attrs:{id:"mvp概念"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mvp概念"}},[s._v("#")]),s._v(" MVP概念")]),s._v(" "),n("p",[s._v("在opengl中，"),n("code",[s._v("MVP")]),s._v("称为模型观察投影矩阵，它是模型（Model）、观察（View）和投影（Projection）矩阵作用在物体上组合作用，用于对物体的坐标系进行变换。")]),s._v(" "),n("p",[n("img",{attrs:{src:t(468),alt:"1639300692250"}})]),s._v(" "),n("p",[s._v("如上图所示，物体的坐标系变化过程为：")]),s._v(" "),n("ol",[n("li",[s._v("局部坐标系")]),s._v(" "),n("li",[s._v("世界坐标系")]),s._v(" "),n("li",[s._v("观察坐标系")]),s._v(" "),n("li",[s._v("裁剪坐标系")])]),s._v(" "),n("h2",{attrs:{id:"mvp公式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mvp公式"}},[s._v("#")]),s._v(" MVP公式")]),s._v(" "),n("p",[n("span",{staticClass:"katex-display"},[n("span",{staticClass:"katex"},[n("span",{staticClass:"katex-mathml"},[n("math",{attrs:{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"}},[n("semantics",[n("mrow",[n("mi",[s._v("M")]),n("mi",[s._v("V")]),n("mi",[s._v("P")]),n("mo",[s._v("=")]),n("mi",[s._v("M")]),n("mi",[s._v("p")]),n("mi",[s._v("r")]),n("mi",[s._v("o")]),n("mi",[s._v("j")]),n("mi",[s._v("e")]),n("mi",[s._v("c")]),n("mi",[s._v("t")]),n("mi",[s._v("i")]),n("mi",[s._v("o")]),n("mi",[s._v("n")]),n("mo",[s._v("⋅")]),n("mi",[s._v("M")]),n("mi",[s._v("v")]),n("mi",[s._v("i")]),n("mi",[s._v("e")]),n("mi",[s._v("w")]),n("mo",[s._v("⋅")]),n("mi",[s._v("M")]),n("mi",[s._v("m")]),n("mi",[s._v("o")]),n("mi",[s._v("d")]),n("mi",[s._v("e")]),n("mi",[s._v("l")])],1),n("annotation",{attrs:{encoding:"application/x-tex"}},[s._v("MVP=Mprojection⋅Mview⋅Mmodel\n")])],1)],1)],1),n("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[n("span",{staticClass:"base"},[n("span",{staticClass:"strut",staticStyle:{height:"0.6833em"}}),n("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.10903em"}},[s._v("M")]),n("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.22222em"}},[s._v("V")]),n("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.13889em"}},[s._v("P")]),n("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2778em"}}),n("span",{staticClass:"mrel"},[s._v("=")]),n("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2778em"}})]),n("span",{staticClass:"base"},[n("span",{staticClass:"strut",staticStyle:{height:"0.8778em","vertical-align":"-0.1944em"}}),n("span",{staticClass:"mord mathnormal"},[s._v("Mp")]),n("span",{staticClass:"mord mathnormal"},[s._v("ro")]),n("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.05724em"}},[s._v("j")]),n("span",{staticClass:"mord mathnormal"},[s._v("ec")]),n("span",{staticClass:"mord mathnormal"},[s._v("t")]),n("span",{staticClass:"mord mathnormal"},[s._v("i")]),n("span",{staticClass:"mord mathnormal"},[s._v("o")]),n("span",{staticClass:"mord mathnormal"},[s._v("n")]),n("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222em"}}),n("span",{staticClass:"mbin"},[s._v("⋅")]),n("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222em"}})]),n("span",{staticClass:"base"},[n("span",{staticClass:"strut",staticStyle:{height:"0.6833em"}}),n("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.10903em"}},[s._v("M")]),n("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.03588em"}},[s._v("v")]),n("span",{staticClass:"mord mathnormal"},[s._v("i")]),n("span",{staticClass:"mord mathnormal"},[s._v("e")]),n("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.02691em"}},[s._v("w")]),n("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222em"}}),n("span",{staticClass:"mbin"},[s._v("⋅")]),n("span",{staticClass:"mspace",staticStyle:{"margin-right":"0.2222em"}})]),n("span",{staticClass:"base"},[n("span",{staticClass:"strut",staticStyle:{height:"0.6944em"}}),n("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.10903em"}},[s._v("M")]),n("span",{staticClass:"mord mathnormal"},[s._v("m")]),n("span",{staticClass:"mord mathnormal"},[s._v("o")]),n("span",{staticClass:"mord mathnormal"},[s._v("d")]),n("span",{staticClass:"mord mathnormal"},[s._v("e")]),n("span",{staticClass:"mord mathnormal",staticStyle:{"margin-right":"0.01968em"}},[s._v("l")])])])])])]),s._v(" "),n("p",[s._v("在shader中用MVP * gl_Position 得到转换后的坐标。")]),s._v(" "),n("h2",{attrs:{id:"示例代码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#示例代码"}},[s._v("#")]),s._v(" 示例代码")]),s._v(" "),n("p",[s._v("在"),n("a",{attrs:{href:"http://iogl.cn/pages/ogltexture/",target:"_blank",rel:"nofollow noopener noreferrer"}},[s._v("OpenGL纹理"),n("OutboundLink")],1),s._v("中，介绍了纹理的使用方法，最终的运行效果为：")]),s._v(" "),n("p",[n("img",{attrs:{src:t(376),alt:"1637478946876",width:"300"}})]),s._v(" "),n("p",[s._v("修改vertext shader，添加MVP变量")]),s._v(" "),n("div",{staticClass:"language-glsl line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-glsl"}},[n("code",[n("span",{pre:!0,attrs:{class:"token macro property"}},[n("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("version")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token expression"}},[n("span",{pre:!0,attrs:{class:"token number"}},[s._v("330")]),s._v(" core")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("layout")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("location "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("vec3")]),s._v(" aPos"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("layout")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("location "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("vec2")]),s._v(" aTexCoord"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("uniform")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("mat4")]),s._v(" MVP"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("out")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("vec2")]),s._v(" TexCoord"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    gl_Position "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MVP "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("vec4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("aPos"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    TexCoord "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" aTexCoord"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[s._v("在绘制之前将MVP矩阵传入着色器：")]),s._v(" "),n("div",{staticClass:"language-c++ line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('glm::mat4 projection = glm::perspective(glm::radians(45.0f), (float) width / (float)height, 0.1f, 100.0f);\nglm::mat4 view = glm::lookAt(glm::vec3(1,2,3), glm::vec3(0,0,0), glm::vec3(0,1,0));\nglm::mat4 model = glm::mat4(1.0f);\nglm::mat4 mvp = projection * view * model;\n\nGLuint mvpId = glGetUniformLocation(programID, "MVP");\nglUniformMatrix4fv(mvpId, 1, GL_FALSE, &mvp[0][0]);\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("现在的运行效果如下：")]),s._v(" "),n("p",[n("img",{attrs:{src:t(469),alt:"1639310527486",width:"300"}})])])}),[],!1,null,null,null);a.default=r.exports}}]);